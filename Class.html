<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Классы</title>
    <link rel="stylesheet" type="text/css" href="TextBoxCSS.css">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
</head>
<body>
<div class="main">
    <div class="header">
        <ul>
            <li><a href="С%23TextBox.html">Вступление</a></li>
            <li><a href="Struktur.html">Структура</a></li>
            <li><a href="DataC%23.html">Типы и переменные</a></li>
            <li><a href="ComandIF.html">Операторы</a></li>
            <li><a href="Massiv.html">Массивы</a></li>
            <li><a href="Class.html" id="active">Классы в C#</a></li>
        </ul>
        <ul id="text">
            <p>На странице:</p>
            <li><a href="#clas">Классы и объекты.</a></li>
            <li><a href="#konstr">Конструкторы</a></li>
            <li><a href="#CrCons">Создание конструкторов</a></li>
            <li><a href="#WorldThis">Ключевое слово this</a></li>
            <li><a href="#InicObj">Инициализаторы объектов</a></li>
        </ul>
    </div>
    <div class="content">
        <h1>Учебник по C#</h1>
        <h2>Классы.</h2>
        <h3 id="clas">Классы и объекты.</h3>
        <p>C# является полноценным объектно-ориентированным языком. Это значит, что программу на C# можно представить в виде взаимосвязанных взаимодействующих между собой объектов.</p>
        <p>Описанием объекта является класс, а объект представляет экземпляр этого класса. Можно еще провести следующую аналогию. У нас у всех есть некоторое представление о человеке, у которого есть имя, возраст, какие-то другие характеристики. То есть некоторый шаблон - этот шаблон можно назвать классом. Конкретное воплощение этого шаблона может отличаться, например, одни люди имеют одно имя, другие - другое имя. И реально существующий человек (фактически экземпляр данного класса) будет представлять объект этого класса.</p>
        <p>По умолчанию проект консольного приложения уже содержит один класс Program, с которого и начинается выполнение программы.</p>
        <p>По сути класс представляет новый тип, который определяется пользователем. Класс определяется с помощью ключевого слова сlass:</p>
        <p><pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: rgb(240, 240, 240) none repeat scroll 0% 0%; color: rgb(68, 68, 68);"><span class="hljs-class"><span class="hljs-keyword" style="font-weight: 700;">class</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Person</span>
</span>{

}</pre></p>
        <p>Где определяется класс? Класс можно определять внутри пространства имен, вне пространства имен, внутри другого класса. Как правило, классы помещаются в отдельные файлы. Но в данном случае поместим новый класс в файле, где располагается класс Program. То есть файл Program.cs будет выглядеть следующим образом:</p>
        <p><pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: rgb(240, 240, 240) none repeat scroll 0% 0%; color: rgb(68, 68, 68);"><span class="hljs-keyword" style="font-weight: 700;">using</span> System;

<span class="hljs-keyword" style="font-weight: 700;">namespace</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">HelloApp</span>
{
    <span class="hljs-keyword" style="font-weight: 700;">class</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Person</span>
    {

    }
    <span class="hljs-keyword" style="font-weight: 700;">class</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Program</span>
    {
        <span class="hljs-function"><span class="hljs-keyword" style="font-weight: 700;">static</span> <span class="hljs-keyword" style="font-weight: 700;">void</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Main</span>(<span class="hljs-params"><span class="hljs-keyword" style="font-weight: 700;">string</span>[] args</span>)
        </span>{

        }
    }
}</pre></p>
        <p>Вся функциональность класса представлена его членами - полями (полями называются переменные класса), свойствами, методами, событиями. Например, определим в классе Person поля и метод:</p>
        <p><pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: rgb(240, 240, 240) none repeat scroll 0% 0%; color: rgb(68, 68, 68);"><span class="hljs-keyword" style="font-weight: 700;">using</span> System;

<span class="hljs-keyword" style="font-weight: 700;">namespace</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">HelloApp</span>
{
    <span class="hljs-keyword" style="font-weight: 700;">class</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Person</span>
    {
        <span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-keyword" style="font-weight: 700;">string</span> name; <span class="hljs-comment" style="color: rgb(136, 136, 136);">// имя</span>
        <span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-keyword" style="font-weight: 700;">int</span> age = <span class="hljs-number" style="color: rgb(136, 0, 0);">18</span>;     <span class="hljs-comment" style="color: rgb(136, 136, 136);">// возраст</span>

        <span class="hljs-function"><span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-keyword" style="font-weight: 700;">void</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">GetInfo</span>(<span class="hljs-params"></span>)
        </span>{
            Console.WriteLine(<span class="hljs-string" style="color: rgb(136, 0, 0);">$"Имя: <span class="hljs-subst" style="color: rgb(68, 68, 68);">{name}</span>  Возраст: <span class="hljs-subst" style="color: rgb(68, 68, 68);">{age}</span>"</span>);
        }
    }
    <span class="hljs-keyword" style="font-weight: 700;">class</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Program</span>
    {
        <span class="hljs-function"><span class="hljs-keyword" style="font-weight: 700;">static</span> <span class="hljs-keyword" style="font-weight: 700;">void</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Main</span>(<span class="hljs-params"><span class="hljs-keyword" style="font-weight: 700;">string</span>[] args</span>)
        </span>{
            Person tom;
        }
    }
}</pre></p>
        <p>В данном случае класс Person представляет человека. Поле name хранит имя, а поле age - возраст человека. А метод GetInfo выводит все данные на консоль. Чтобы все данные были доступны вне класса Person переменные и метод определены с модификатором public. Поскольку поля фактически те же переменные, им можно присвоить начальные значения, как в случае выше, поле age инициализировано значением 18.</p>
        <p>Так как класс представляет собой новый тип, то в программе мы можем определять переменные, которые представляют данный тип. Так, здесь в методе Main определена переменная tom, которая представляет класс Person. Но пока эта переменная не указывает ни на какой объект и по умолчанию она имеет значение null. Поэтому вначале необходимо создать объект класса Person.</p>
        <h3 id="konstr">Конструкторы</h3>
        <p>Кроме обычных методов в классах используются также и специальные методы, которые называются конструкторами. Конструкторы вызываются при создании нового объекта данного класса. Конструкторы выполняют инициализацию объекта.</p>
        <p>Если в классе не определено ни одного конструктора, то для этого класса автоматически создается конструктор по умолчанию. Такой конструктор не имеет параметров и не имеет тела.</p>
        <p>Выше класс Person не имеет никаких конструкторов. Поэтому для него автоматически создается конструктор по умолчанию. И мы можем использовать этот конструктор. В частности, создадим один объект класса Person:</p>
        <p><pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: rgb(240, 240, 240) none repeat scroll 0% 0%; color: rgb(68, 68, 68);"><span class="hljs-keyword" style="font-weight: 700;">class</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Person</span>
{
    <span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-keyword" style="font-weight: 700;">string</span> name; <span class="hljs-comment" style="color: rgb(136, 136, 136);">// имя</span>
    <span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-keyword" style="font-weight: 700;">int</span> age;     <span class="hljs-comment" style="color: rgb(136, 136, 136);">// возраст</span>

    <span class="hljs-function"><span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-keyword" style="font-weight: 700;">void</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">GetInfo</span>(<span class="hljs-params"></span>)
    </span>{
        Console.WriteLine(<span class="hljs-string" style="color: rgb(136, 0, 0);">$"Имя: <span class="hljs-subst" style="color: rgb(68, 68, 68);">{name}</span>  Возраст: <span class="hljs-subst" style="color: rgb(68, 68, 68);">{age}</span>"</span>);
    }
}
<span class="hljs-keyword" style="font-weight: 700;">class</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Program</span>
{
    <span class="hljs-function"><span class="hljs-keyword" style="font-weight: 700;">static</span> <span class="hljs-keyword" style="font-weight: 700;">void</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Main</span>(<span class="hljs-params"><span class="hljs-keyword" style="font-weight: 700;">string</span>[] args</span>)
    </span>{
        Person tom = <span class="hljs-keyword" style="font-weight: 700;">new</span> Person();
        tom.GetInfo();      <span class="hljs-comment" style="color: rgb(136, 136, 136);">// Имя: Возраст: 0</span>

        tom.name = <span class="hljs-string" style="color: rgb(136, 0, 0);">"Tom"</span>;
        tom.age = <span class="hljs-number" style="color: rgb(136, 0, 0);">34</span>;
        tom.GetInfo();  <span class="hljs-comment" style="color: rgb(136, 136, 136);">// Имя: Tom Возраст: 34</span>
        Console.ReadKey();
    }
}</pre></p>
        <p>Для создания объекта Person используется выражение new Person(). Оператор new выделяет память для объекта Person. И затем вызывается конструктор по умолчанию, который не принимает никаких параметров. В итоге после выполнения данного выражения в памяти будет выделен участок, где будут храниться все данные объекта Person. А переменная tom получит ссылку на созданный объект.</p>
        <p>Если конструктор не инициализирует значения переменных объекта, то они получают значения по умолчанию. Для переменных числовых типов это число 0, а для типа string и классов - это значение null (то есть фактически отсутствие значения).</p>
        <p>После создания объекта мы можем обратиться к переменным объекта Person через переменную tom и установить или получить их значения, например, tom.name = "Tom";.</p>
        <h3 id="CrCons">Создание конструкторов</h3>
        <p>Выше для инициализации объекта использовался конструктор по умолчанию. Однако мы сами можем определить свои конструкторы:</p>
        <p><pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: rgb(240, 240, 240) none repeat scroll 0% 0%; color: rgb(68, 68, 68);"><span class="hljs-keyword" style="font-weight: 700;">class</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Person</span>
{
    <span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-keyword" style="font-weight: 700;">string</span> name;
    <span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-keyword" style="font-weight: 700;">int</span> age;

    <span class="hljs-function"><span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Person</span>(<span class="hljs-params"></span>) </span>{ name = <span class="hljs-string" style="color: rgb(136, 0, 0);">"Неизвестно"</span>; age = <span class="hljs-number" style="color: rgb(136, 0, 0);">18</span>; }      <span class="hljs-comment" style="color: rgb(136, 136, 136);">// 1 конструктор</span>

    <span class="hljs-function"><span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Person</span>(<span class="hljs-params"><span class="hljs-keyword" style="font-weight: 700;">string</span> n</span>) </span>{ name = n; age = <span class="hljs-number" style="color: rgb(136, 0, 0);">18</span>; }         <span class="hljs-comment" style="color: rgb(136, 136, 136);">// 2 конструктор</span>

    <span class="hljs-function"><span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Person</span>(<span class="hljs-params"><span class="hljs-keyword" style="font-weight: 700;">string</span> n, <span class="hljs-keyword" style="font-weight: 700;">int</span> a</span>) </span>{ name = n; age = a; }   <span class="hljs-comment" style="color: rgb(136, 136, 136);">// 3 конструктор</span>

    <span class="hljs-function"><span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-keyword" style="font-weight: 700;">void</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">GetInfo</span>(<span class="hljs-params"></span>)
    </span>{
        Console.WriteLine(<span class="hljs-string" style="color: rgb(136, 0, 0);">$"Имя: <span class="hljs-subst" style="color: rgb(68, 68, 68);">{name}</span>  Возраст: <span class="hljs-subst" style="color: rgb(68, 68, 68);">{age}</span>"</span>);
    }
    </pre>
        <p><pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: rgb(240, 240, 240) none repeat scroll 0% 0%; color: rgb(68, 68, 68);"><span class="hljs-function"><span class="hljs-keyword" style="font-weight: 700;">static</span> <span class="hljs-keyword" style="font-weight: 700;">void</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Main</span><span class="hljs-params">(<span class="hljs-built_in" style="color: rgb(57, 115, 0);">string</span>[] args)</span>
</span>{
    Person tom = <span class="hljs-keyword" style="font-weight: 700;">new</span> Person(); <span class="hljs-comment" style="color: rgb(136, 136, 136);">// вызов 1-ого конструктора без параметров</span>
    Person bob = <span class="hljs-keyword" style="font-weight: 700;">new</span> Person(<span class="hljs-string" style="color: rgb(136, 0, 0);">"Bob"</span>); <span class="hljs-comment" style="color: rgb(136, 136, 136);">//вызов 2-ого конструктора<br> с одним параметром</span>
    Person sam = <span class="hljs-keyword" style="font-weight: 700;">new</span> Person(<span class="hljs-string" style="color: rgb(136, 0, 0);">"Sam"</span>, <span class="hljs-number" style="color: rgb(136, 0, 0);">25</span>); <span class="hljs-comment" style="color: rgb(136, 136, 136);">// вызов 3-его конструктора<br> с двумя параметрами</span>


    bob.GetInfo();   <span class="hljs-comment" style="color: rgb(136, 136, 136);">// Имя: Bob  Возраст: 18</span>
    tom.GetInfo();  <span class="hljs-comment" style="color: rgb(136, 136, 136);">// Имя: Неизвестно  Возраст: 18</span>
    sam.GetInfo(); <span class="hljs-comment" style="color: rgb(136, 136, 136);">// Имя: Sam  Возраст: 25</span>
}</pre></p>
        <h3 id="WorldThis">Ключевое слово this</h3>
        <p>Ключевое слово this представляет ссылку на текущий экземпляр класса. В каких ситуациях оно нам может пригодиться? В примере выше определены три конструктора. Все три конструктора выполняют однотипные действия - устанавливают значения полей name и age. Но этих повторяющихся действий могло быть больше. И мы можем не дублировать функциональность конструкторов, а просто обращаться из одного конструктора к другому через ключевое слово this, передавая нужные значения для параметров:</p>
        <p><pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: rgb(240, 240, 240) none repeat scroll 0% 0%; color: rgb(68, 68, 68);"><span class="hljs-keyword" style="font-weight: 700;">class</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Person</span>
{
    <span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-keyword" style="font-weight: 700;">string</span> name;
    <span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-keyword" style="font-weight: 700;">int</span> age;

    <span class="hljs-function"><span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Person</span>(<span class="hljs-params"></span>) : <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">this</span>(<span class="hljs-params"><span class="hljs-string" style="color: rgb(136, 0, 0);">"Неизвестно"</span></span>)
    </span>{
    }
    <span class="hljs-function"><span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Person</span>(<span class="hljs-params"><span class="hljs-keyword" style="font-weight: 700;">string</span> name</span>) : <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">this</span>(<span class="hljs-params">name, <span class="hljs-number" style="color: rgb(136, 0, 0);">18</span></span>)
    </span>{
    }
    <span class="hljs-function"><span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Person</span>(<span class="hljs-params"><span class="hljs-keyword" style="font-weight: 700;">string</span> name, <span class="hljs-keyword" style="font-weight: 700;">int</span> age</span>)
    </span>{
        <span class="hljs-keyword" style="font-weight: 700;">this</span>.name = name;
        <span class="hljs-keyword" style="font-weight: 700;">this</span>.age = age;
    }
    <span class="hljs-function"><span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-keyword" style="font-weight: 700;">void</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">GetInfo</span>(<span class="hljs-params"></span>)
    </span>{
        Console.WriteLine(<span class="hljs-string" style="color: rgb(136, 0, 0);">$"Имя: <span class="hljs-subst" style="color: rgb(68, 68, 68);">{name}</span>  Возраст: <span class="hljs-subst" style="color: rgb(68, 68, 68);">{age}</span>"</span>);
    }
}</pre></p>
        <p>В данном случае первый конструктор вызывает второй, а второй конструктор вызывает третий. По количеству и типу параметров компилятор узнает, какой именно конструктор вызывается. Например, во втором конструкторе:</p>
        <p><pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: rgb(240, 240, 240) none repeat scroll 0% 0%; color: rgb(68, 68, 68);"><span class="hljs-keyword" style="font-weight: 700;">public</span> Person(string <span class="hljs-keyword" style="font-weight: 700;">name</span>) : this(<span class="hljs-keyword" style="font-weight: 700;">name</span>, <span class="hljs-number" style="color: rgb(136, 0, 0);">18</span>)
{
}</pre></p>
        <p>идет обращение к третьему конструктору, которому передаются два значения. Причем в начале удет выполняться именно третий конструктор, и только потом код второго конструктора.

            Также стоит отметить, что в третьем конструкторе параметры называются также, как и поля класса.</p>
        <p><pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: rgb(240, 240, 240) none repeat scroll 0% 0%; color: rgb(68, 68, 68);"><span class="hljs-function"><span class="hljs-keyword" style="font-weight: 700;">public</span> <span class="hljs-title" style="color: rgb(136, 0, 0); font-weight: 700;">Person</span><span class="hljs-params">(<span class="hljs-built_in" style="color: rgb(57, 115, 0);">string</span> name, <span class="hljs-keyword" style="font-weight: 700;">int</span> age)</span>
</span>{
    <span class="hljs-keyword" style="font-weight: 700;">this</span>.name = name;
    <span class="hljs-keyword" style="font-weight: 700;">this</span>.age = age;
}</pre></p>
        <p>И чтобы разграничить параметры и поля класса, к полям класса обращение идет через ключевое слово this. Так, в выражении this.name = name; первая часть this.name означает, что name - это поле текущего класса, а не название параметра name. Если бы у нас параметры и поля назывались по-разному, то использовать слово this было бы необязательно. Также через ключевое слово this можно обращаться к любому полю или методу.</p>
        <h3 id="InicObj">Инициализаторы объектов</h3>
        <p>Для инициализации объектов классов можно применять инициализаторы. Инициализаторы представляют передачу в фигурных скобках значений доступным полям и свойствам объекта:</p>
        <p><pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: rgb(240, 240, 240) none repeat scroll 0% 0%; color: rgb(68, 68, 68);">Person <span class="hljs-attr">tom</span> = new Person { <span class="hljs-attr">name</span> = <span class="hljs-string" style="color: rgb(136, 0, 0);">"Tom"</span>, <span class="hljs-attr">age=31</span> };
tom.GetInfo();          // Имя: Tom  Возраст: <span class="hljs-number" style="color: rgb(136, 0, 0);">31</span></pre></p>
        <p>С помощью инициализатора объектов можно присваивать значения всем доступным полям и свойствам объекта в момент создания без явного вызова конструктора.</p>
        <p>При использовании инициализаторов следует учитывать следующие моменты:</p>
        <ul>
            <li>С помощью инициализатора мы можем установить значения только доступных из внешнего кода полей и свойств объекта. Например, в примере выше поля name и age имеют модификатор доступа public, поэтому они доступны из любой части программы.</li>
            <li>Инициализатор выполняется после конструктора, поэтому если и в конструкторе, и в инициализаторе устанавливаются значения одних и тех же полей и свойств, то значения, устанавливаемые в конструкторе, заменяются значениями из инициализатора.</li>
        </ul>
    </div>
    <div class="foot" style="width: 780px">
        <a href="Massiv.html"><h3>Назад</h3></a>
    </div>
</div>
</body>
</html>